CONTEXTS IN GITHUB ACTIONS
==========================

### What are Contexts?

In GitHub Actions, **contexts are collections of information** that GitHub provides to your workflow while it runs.
You access this information using expression syntax:

```
${{ context_name.value }}
```

Example:

```
${{ github.ref }}
${{ github.actor }}
```

These contexts allow your workflow to know:

* what event triggered it
* which branch triggered it
* who triggered it
* job status
* runner machine details
* step outputs
* matrix values

Without contexts, your workflow would not understand anything about its environment.

======================
WHY DO WE PRINT CONTEXTS? (Your given example)
==============================================

The YAML you shared is designed to **print all contexts** so we can learn what data they contain.

This YAML prints:

* github context
* job context
* steps context
* runner context
* strategy context
* matrix context

Here is the same workflow you shared:

```
name: Context testing
on: push

jobs:
  dump_contexts_to_log:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"

      - name: Dump job context
        env:
          JOB_CONTEXT: ${{ toJson(job) }}
        run: echo "$JOB_CONTEXT"

      - name: Dump steps context
        env:
          STEPS_CONTEXT: ${{ toJson(steps) }}
        run: echo "$STEPS_CONTEXT"

      - name: Dump runner context
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}
        run: echo "$RUNNER_CONTEXT"

      - name: Dump strategy context
        env:
          STRATEGY_CONTEXT: ${{ toJson(strategy) }}
        run: echo "$STRATEGY_CONTEXT"

      - name: Dump matrix context
        env:
          MATRIX_CONTEXT: ${{ toJson(matrix) }}
        run: echo "$MATRIX_CONTEXT"
```

Now let us explain each context clearly.

============================================================

1. GITHUB CONTEXT
   ============================================================

This is the **most important context**.

It contains complete details about:

* event type (push, pull_request, manual)
* branch
* ref
* commit SHA
* repository name
* actor (user who triggered)
* workflow name
* run id and run number
* full event payload (github.event)

This step prints everything:

```
env:
  GITHUB_CONTEXT: ${{ toJson(github) }}
run: echo "$GITHUB_CONTEXT"
```

This helps you see:

```
ref: refs/heads/main
event_name: push
actor: prasnth
repository: prasnth/kkfunda
sha: 1234567abc
```

============================================================
2. JOB CONTEXT
==============

The job context tells you:

* job status (success, failure)
* job name
* how workflow treats the job internally

The workflow prints it here:

```
env:
  JOB_CONTEXT: ${{ toJson(job) }}
run: echo "$JOB_CONTEXT"
```

Typical output:

```
status: success
```

============================================================
3. STEPS CONTEXT
================

Steps context contains:

* outputs from each step
* conclusion of each step
* step execution order

This step prints it:

```
env:
  STEPS_CONTEXT: ${{ toJson(steps) }}
run: echo "$STEPS_CONTEXT"
```

Important:
This is mainly useful when you use:

```
id: step1
echo "value=123" >> $GITHUB_OUTPUT
```

Then later:

```
steps.step1.outputs.value
```

============================================================
4. RUNNER CONTEXT
=================

This gives information about the machine running your workflow:

* OS (ubuntu, windows, macOS)
* CPU architecture
* temporary directories
* tool cache paths

This step prints runner info:

```
env:
  RUNNER_CONTEXT: ${{ toJson(runner) }}
run: echo "$RUNNER_CONTEXT"
```

Example output:

```
os: Linux
architecture: X64
temp: /home/runner/work/_temp
```

============================================================
5. STRATEGY CONTEXT
===================

This shows strategy settings like:

* matrix values
* max-parallel
* fail-fast

If you don’t use matrix, it prints `{}`.

This step prints strategy:

```
env:
  STRATEGY_CONTEXT: ${{ toJson(strategy) }}
run: echo "$STRATEGY_CONTEXT"
```

Output when no matrix:

```
{}
```

============================================================
6. MATRIX CONTEXT
=================

Only available when you use matrix:

```
strategy:
  matrix:
    os: [ubuntu-latest, windows-latest]
    node: [16, 18]
```

Then this step prints matrix values:

```
env:
  MATRIX_CONTEXT: ${{ toJson(matrix) }}
run: echo "$MATRIX_CONTEXT"
```

Example output:

```
{"os":"ubuntu-latest","node":16}
```

============================================================
WHY DO WE CONVERT TO JSON?
==========================

Contexts are objects.
To print them inside logs, we must convert them using:

```
toJson()
```

Example:

```
${{ toJson(github) }}
```

============================================================
FINAL SUMMARY
=============

**Contexts give information about:**

1. github → event, branch, commit, actor
2. job → job status
3. steps → step outputs
4. runner → runner machine details
5. strategy → matrix strategy
6. matrix → matrix values

The workflow you shared prints all of them so you can understand what each contains.

============================================================

