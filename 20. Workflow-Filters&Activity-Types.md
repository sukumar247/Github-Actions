# Workflow Filters and Activity Types

Deep Explanation with Multiple Examples

GitHub Actions workflows can be triggered based on specific conditions such as:

* Branch filters
* Tag filters
* Path filters
* File-based filters
* Activity types (created, edited, opened, closed, synchronized, etc.)
* Event-specific filters for push, pull_request, workflow_dispatch, schedule, etc.

Filters allow you to control exactly **when** your workflow should run.

This is critical in CI/CD because unnecessary workflows waste time and money.

---

# 1. Branch Filters

Used with push and pull_request.

## Allow only certain branches

```
on:
  push:
    branches:
      - main
      - dev
```

Runs only when code is pushed to main or dev.

## Exclude certain branches

```
on:
  push:
    branches-ignore:
      - experimental/*
```

Any branch starting with experimental/ will be ignored.

---

# 2. Tag Filters

## Run only for tags

```
on:
  push:
    tags:
      - v*
```

This runs for v1, v2.0, v3.5.1 etc.

## Exclude certain tags

```
on:
  push:
    tags-ignore:
      - beta*
```

---

# 3. Path Filters

Runs workflows only when specific files or folders are modified.

## Run only when application files change

```
on:
  push:
    paths:
      - app/**
      - scripts/**
```

## Ignore documentation changes

```
on:
  push:
    paths-ignore:
      - docs/**
      - README.md
```

Meaning: If only docs or README change, pipeline will not run.

---

# 4. Combining Branch and Path Filters

```
on:
  push:
    branches:
      - main
    paths:
      - infra/**
```

Runs only if:

* Branch = main
* And affected file is inside infra folder

---

# 5. Pull Request Filters

```
on:
  pull_request:
    branches:
      - main
    paths:
      - src/**
```

PR pipeline runs only if:

* Target branch = main
* Code changes inside src folder

---

# 6. Activity Types

Some events have additional activity sub-types.

Example events with activity types:

* pull_request
* issues
* release
* workflow_dispatch (inputs)
* schedule
* push (branch, path, tag filters only)

The most important activity types are in pull_request.

---

# 7. pull_request Activity Types

Common activity types:

* opened
* reopened
* synchronize
* closed
* labeled
* unlabeled
* edited
* ready_for_review
* converted_to_draft
* review_requested
* review_request_removed

## Run workflow only when PR is opened or synchronized

```
on:
  pull_request:
    types: [opened, synchronize]
```

## Run workflow only when PR is closed

```
on:
  pull_request:
    types: [closed]
```

## Run workflow only when PR is labeled

```
on:
  pull_request:
    types: [labeled]
```

Use case: Auto-deploy when label deploy is added.

---

# 8. Full Example: Build Only When PR is Opened

```
name: PR Build
on:
  pull_request:
    types: [opened]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Building due to PR opened"
```

---

# 9. Full Example: Run Tests Only When Code Changes in a Folder

```
name: Folder Test
on:
  push:
    paths:
      - backend/**
      - frontend/**
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Folder-specific tests triggered"
```

---

# 10. Full Example: Deploy Only For Tags

```
name: Tag Deploy
on:
  push:
    tags:
      - v*
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Deploying release"
```

---

# 11. Full Example: PR Activity Type + Path Filter

```
name: PR Path Filter
on:
  pull_request:
    types: [opened, synchronize]
    paths:
      - src/**
      - api/**
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo "PR contains valid code changes"
```

This workflow runs when:

* PR is opened or updated
* Code changes are inside src or api

---

# 12. Real DevOps Example

Skip CI if only README is changed

```
on:
  push:
    paths-ignore:
      - README.md
jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Running CI"
```

---

# 13. Real DevOps Example

Deploy only when PR is merged to main

```
on:
  pull_request:
    types: [closed]
    branches:
      - main

jobs:
  deploy:
    if: ${{ github.event.pull_request.merged == true }}
    runs-on: ubuntu-latest
    steps:
      - run: echo "Deploying because PR was merged"
```

This ensures:

* PR must be closed
* PR must be merged
* Target branch must be main

---

# 14. Real DevOps Example

Release pipeline based on tag pattern

```
on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
```

This matches version numbers like:

* v1.0.0
* v2.4.10

---

# Summary

GitHub Actions provides multiple filters to control when a workflow runs:

* Branch filters
* Tag filters
* Path filters
* Pull request activity types
* Combined filters (branch + path + activity)

These filters help optimize pipelines by triggering jobs only when needed, reducing cost and improving performance.
